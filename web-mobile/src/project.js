window.__require=function e(t,n,o){function i(a,c){if(!n[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var d="function"==typeof __require&&__require;if(!c&&d)return d(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AnimCtrl:[function(e,t,n){"use strict";if(cc._RF.push(t,"a8ae46TqKlJhJV0lQ4LHWKH","AnimCtrl"),!cc.runtime){var o=e("GameData");cc.Class({extends:cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{_armature:null,_armatureDisplay:null,_idleState:null,_deadState:null,_walkState:null,_jumpState:null,_attackState:null,_attackListener:null,_attackFunc:null},onLoad:function(){var e=this;this.curState=o.stateEnum.IDLE,this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.COMPLETE,function(t){e._jumpState=null,e._attackState=null,e._attackFunc&&e._attackFunc()},this),this._speed=cc.v2()},_updateAttack:function(e,t){switch(e){case 1:this._attackFunc=t,this.attackAnimation();break;case 2:case 3:this._attackFunc=t,this.releaseAnimation()}},attackAnimation:function(){this._attackState||(this._armatureDisplay.armatureName="attack",this._attackState=this._armatureDisplay.playAnimation("attack",1)),this._idleState=null,this._walkState=null},releaseAnimation:function(){if(!this._deadState){this._attackState||(this._armatureDisplay.armatureName="release",this._attackState=this._armatureDisplay.playAnimation("release",1)),this._idleState=null,this._walkState=null}},_userDead:function(){this._deadState||(this._armatureDisplay.armatureName="died",this._deadState=this._armatureDisplay.playAnimation("died",1)),this._idleState=null,this._walkState=null},_userRevive:function(){this._idleState||(this._armatureDisplay.armatureName="idle",this._idleState=this._armatureDisplay.playAnimation("idle",0)),this._deadState=null,this._walkState=null},_updateAnim:function(e,t){this._attackState||this._deadState||(0!=t.y&&0==this.node.isground?(this._armatureDisplay.armatureName="jump",this._armatureDisplay.playAnimation("jump",0),this._idleState=null,this._walkState=null):0!=t.x?(this._walkState||(this._armatureDisplay.armatureName="run",this._walkState=this._armatureDisplay.playAnimation("run",0)),this._idleState=null,this._walkState.timeScale=1.5):(this._idleState||(this._armatureDisplay.armatureName="idle",this._idleState=this._armatureDisplay.playAnimation("idle",0)),this._walkState=null))},speedLimitMove:function(e){return this._attackState&&(e=cc.v2()),e},releaseSkillLimit:function(e){return!this._attackState&&0==e.y}})}cc._RF.pop()},{GameData:"GameData"}],Collision:[function(e,t,n){"use strict";cc._RF.push(t,"fa444zfnnZALZiPtuRXQMrN","Collision");var o=e("Engine"),i=e("GameData");cc.Class({extends:cc.Component,onLoad:function(){this.rigidBody=this.getComponent(cc.RigidBody),this.rigidBody.enabledContactListener=!0},onBeginContact:function(e,t,n){var s=this;this.handleCollision(t,n,function(e,t){if(s.node.conid&&s.node.sk&&i.conid==s.node.conid){var n={sk:s.node.sk,from:s.node.conid,to:t.node.conid};o.prototype.calculaDamage(n)}})},onEndContact:function(e,t,n){},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},handleCollision:function(e,t,n){"skill"==e.node.group&&"role"==t.node.group?n(e,t):"role"==e.node.group&&"skill"==t.node.group&&n(t,e)}}),cc._RF.pop()},{Engine:"Engine",GameData:"GameData"}],Damage:[function(e,t,n){"use strict";cc._RF.push(t,"562c93BA5JJ56ReIiZjHBsb","Damage"),t.exports={calculaDamage:function(e){if(e.states){var t=e.states;for(var n in t)G.data.users[n]&&t[n].base&&(G.data.users[n].base=t[n].base)}},updateUser:function(){}},cc._RF.pop()},{}],DragonBonesAnim:[function(e,t,n){"use strict";cc._RF.push(t,"25799enHSFD+pLg7RTzJw+1","DragonBonesAnim"),cc.runtime||cc.Class({extends:cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{_armature:null,_armatureDisplay:null,_parentFunc:null},onLoad:function(){this.initData()},initData:function(){var e=this;this._armatureDisplay||(this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.COMPLETE,function(t){e._parentFunc&&e._parentFunc()},this))},run:function(e,t){this._parentFunc=t,this.initData(),this._armatureDisplay.armatureName=e,this._armatureDisplay.playAnimation(e,1)}}),cc._RF.pop()},{}],Engine:[function(e,t,n){"use strict";cc._RF.push(t,"35c4c4HoJdCvaQ/TCu21Q+f","Engine");var o=e("Manage"),i=e("Response"),s=e("Glb");function a(){console.log("Engine init")}a.prototype.init=function(){o.connect.init=o.engine(s.url),i.prototype.bind(s.init),console.log("\u521d\u59cb\u5316")},a.prototype.instance=function(){this.routeRegistered(s.login)},a.prototype.routeRegistered=function(e){o.connect[e]=o.engine(s.url+e),i.prototype.bind(e),console.log("\u6ce8\u518c\u8fde\u63a5"+e)},a.prototype.login=function(e){this.sendMsg(s.login,"login",e)},a.prototype.register=function(e){this.sendMsg(s.login,"register",e)},a.prototype.createUserName=function(e){this.sendMsg(s.home,"createUserName",e)},a.prototype.selectRole=function(e){this.sendMsg(s.home,"selectRole",e)},a.prototype.startGame=function(e){this.sendMsg(s.game,"start",{conid:e})},a.prototype.updateFrame=function(e){this.sendMsg(s.game,"frameSync",e)},a.prototype.pkStatusSync=function(e){this.sendMsg(s.game,"pkStatusSync",e)},a.prototype.switchShadow=function(e){this.sendMsg(s.game,"switchShadow",e)},a.prototype.switchDefense=function(e){this.sendMsg(s.game,"switchDefense",e)},a.prototype.calculaDamage=function(e){this.sendMsg(s.game,"damage",e)},a.prototype.logout=function(){async.each(o.connect,function(e,t){e&&e.disconnect(!0)},function(e){console.log(e)})},a.prototype.sendMsg=function(e,t,n){var i={};i.type=t,i.data=JSON.stringify(n),o.connect[e].emit(t,i)},t.exports=a,cc._RF.pop()},{Glb:"Glb",Manage:"Manage",Response:"Response"}],Func:[function(e,t,n){"use strict";cc._RF.push(t,"4f56dK+JVhIZZZSbeR16E+T","Func"),t.exports={forceRun:function(e){try{e()}catch(e){console.log(e.message)}},getUser:function(e){return void 0==e&&(e=G.data.conid),G.data.users[e]}},cc._RF.pop()},{}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"2913bAOH7BGipp9GxOzUW8r","GameData"),t.exports={zIndex:0,initStatus:1,stateEnum:{IDLE:0,MOVE:1,JUMP:2,ATTACK:3,DEAD:-1},state:0,angle:null,face:1,dir:0,dirY:0,dirx:0,diry:0,conSpeed:300,speed:0,users:{},scale:.2,gravity:9.8*3},cc._RF.pop()},{}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"dd030NTSLpPU7PUf+puFsO5","Game");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("Glb"),s=e("UI"),a=e("MapManager"),c=e("GameData"),r=e("Message"),d=e("Engine"),l=e("Response"),h=e("LoadRes"),u=e("NodePool"),p=e("Player"),_=e("Func"),f=e("Damage"),E=e("Other"),m=e("Res");cc.Class({extends:cc.Component,properties:{_boundary:cc.Node,_curNode:cc.Node,content:cc.Node,userInfos:[],buttonLeaveRoom:cc.Node},onLoad:function(){this.onPhysics(!0),this.initEvent(this),h.prototype.init(),this.initLoad()},initLoad:function(){try{G,G.func=_,G.data=c,G.stateEnum=G.data.stateEnum,G.state=G.data.state,G.damage=f,this.initPrefabs()}catch(e){cc.director.loadScene("main")}},initPrefabs:function(){async.parallel([function(e){h.prototype.loadPrefab(m.prefab.map,function(){u.prototype.instanceMap(),e(null,"map")})},function(e){h.prototype.loadPrefab(m.prefab.other,function(){u.prototype.instanceOther(),e(null,"other")})},function(e){h.prototype.loadPrefab(m.prefab.skill,function(){u.prototype.instanceSkill(),e(null,"skill")})},function(e){h.prototype.loadPrefab(m.prefab.battle,function(){u.prototype.instanceBattle(),e(null,"battle")})},function(e){h.prototype.loadPrefab(m.prefab.role,function(){e(null,"role")})},function(e){h.prototype.loadPrefab(m.prefab.shadow,function(){u.prototype.instanceShadow(),e(null,"shadow")})},function(e){h.prototype.loadPrefab(m.prefab.defense,function(){u.prototype.instanceDefense(),e(null,"defense")})}],function(e,t){null!=e?console.log("initPrefabs:",e):(d.prototype.routeRegistered(i.game),d.prototype.startGame(c.conid))})},initEvent:function(e){l.prototype.init(e),this.node.on(r.GAME_START_EVENT,this.onEvent,this),this.node.on(r.GAME_JOIN_EVENT,this.onEvent,this),this.node.on(r.GAME_LEAVE_ROOM,this.onEvent,this),this.node.on(r.FRAME_SYNC,this.onEvent,this),this.node.on(r.PK_STATUS_SYNC,this.onEvent,this),this.node.on(r.SWITCH_SHADOW,this.onEvent,this),this.node.on(r.SWITCH_DEFENSE,this.onEvent,this),this.node.on(r.CALCULA_DAMAGE,this.onEvent,this),this.node.on(r.ROLE_UPGRADE,this.onEvent,this),this.node.on(r.USER_REVIVE,this.onEvent,this)},onEvent:function(e){var t=e.detail;switch(void 0==t&&(t=e),e.type){case r.GAME_START_EVENT:this.onStartEvent(t.data);break;case r.GAME_JOIN_EVENT:this.onJoinEvent(t.data);break;case r.GAME_LEAVE_ROOM:this.onDestroyUser(t.data);break;case r.FRAME_SYNC:this.onFrameSync(t.data);break;case r.PK_STATUS_SYNC:this.oPkStatusSync(t.data);break;case r.SWITCH_SHADOW:this.onSwitchShadow(t.data);break;case r.SWITCH_DEFENSE:this.onSwitchDefense(t.data);break;case r.CALCULA_DAMAGE:this.onCalculaDamage(t.data);break;case r.ROLE_UPGRADE:this.onRoleUpgrade(t.data);break;case r.USER_REVIVE:t.data;this.onUserRevive(t.data)}},onStartEvent:function(e){var t=this;console.log("====onStartEvent=====",e.users);var n=e.conid;c.curUser=e.user,async.parallel([function(o){s.init(function(){u.prototype.instanceRole("viewInfo");var o=e.users;async.each(o,function(o,i){c.users[o.conid]=o,n==o.conid?t.onCreateUser(e.user):n!=o.conid&&t.onCreateOtherUser(o)},function(e){console.log(e)})})},function(n){a.loadMap(t.content,e.user.map)}],function(e,t){null!=e&&console.log("onStartEvent:",e)})},onJoinEvent:function(e){var t=e;c.users[t.conid]=t,this.onCreateOtherUser(t)},onCreateUserInfoView:function(e,t,n){var i=u.prototype.getRole("viewInfo");if("object"===(void 0===i?"undefined":o(i))){i.parent=n;var s=i.getChildByName("nm");s.y=-10,s.getComponent(cc.Label).string=e.nm,t._userInfo={user:e,viewInfoNode:i}}},onCreateUser:function(e){u.prototype.instanceRole(e.base.role);var t=u.prototype.getRole(e.base.role);if("object"===(void 0===t?"undefined":o(t))){s.roleBar&&s.roleBar.updateRoleBody(e.base),c.bodyId=e.base.role,t.x=0,t.y=0,t.conid=e.conid,t.name=e.conid,t.nm=e.nm,t.addComponent(p),this._curNode=t,this.content.addChild(t),this.onUpdaetZindex(t,!1);var n=t.getComponent(p);G.playerCtrl=n,n._content=this.content,n.maxSpeed=e.base.speed,this.onCreateUserInfoView(e,n,t),s.processBg&&s.processBg.hideBg(),e.sync&&(t.scaleX=e.sync.dir,t.x=e.sync.x,t.y=e.sync.y)}},onCreateOtherUser:function(e){u.prototype.instanceRole(e.base.role);var t=u.prototype.getRole(e.base.role);if("object"===(void 0===t?"undefined":o(t))){t.conid=e.conid,t.name=e.conid,this.content.addChild(t),this.onUpdaetZindex(t,!0),t.addComponent(E);var n=t.getComponent(E);n._content=this.content,n.maxSpeed=e.base.speed,this.onCreateUserInfoView(e,n,t),e.sync&&(t.scaleX=e.sync.dir,t.x=e.sync.x,t.y=e.sync.y),e.switchShadow&&n.updateShadowStatus(e.switchShadow,e.shadowkey),e.switchDefense&&n.updateDefenseStatus(e.switchDefense)}},onUpdateUser:function(e,t){this.onDestroyUser(e),t?this.onCreateUser(e):this.onCreateOtherUser(e)},onSwitchShadow:function(e){var t=e.conid;if(t&&c.users[t]){var n=this.content.getChildByName(t);(c.conid==t?n.getComponent(p):n.getComponent(E)).updateShadowStatus(e.switchShadow,e.shadowkey)}},onSwitchDefense:function(e){var t=e.conid;if(t&&c.users[t]){var n=this.content.getChildByName(t);(c.conid==t?n.getComponent(p):n.getComponent(E)).updateDefenseStatus(e.switchDefense)}},onDestroyUser:function(e){var t=this.content.getChildByName(e.conid);t&&u.prototype.destroyRole(e.base.role,t)},onFrameSync:function(e){var t=e.conid;if(t&&c.users[t]){var n=this.content.getChildByName(t),o=null;switch(c.conid==t?n.getComponent(p):o=n.getComponent(E),e.action){case r.POSINTON_CHANGED:void 0!=o&&o.onSetSyncData(e)}}},oPkStatusSync:function(e){var t=e.conid;if(t&&c.users[t]){var n=this.content.getChildByName(t),o=null,i=null;switch(c.conid==t?o=n.getComponent(p):i=n.getComponent(E),e.action){case r.EVENT_ATTACK:void 0!=o&&o.onSetSyncAction(e),void 0!=i&&i.onSetSyncAction(e)}}},onCalculaDamage:function(e){var t=this;if(e.states){G.damage.calculaDamage(e);var n=e.states;async.each(n,function(e,n){c.conid==e.conid&&(s.roleBar&&s.roleBar.updateHpAndMana(e.base),c.curUser.base=e.base,c.curUser.ability=e.ability,s.roleAttr.showRolePage(c.curUser)),t.onCalculaDamageItemHandle(e.conid,e)},function(e){console.log(e)})}},onCalculaDamageItemHandle:function(e,t){var n=t.damageMsg;if(n){var i="",s="";switch(n.type){case"nohit":i="nohit",s="\u672a\u547d\u4e2d";break;case"damage":case"dreboundDamage":i="damage",s=n.value;break;case"invincible":i="invincible",s="\u65e0\u654c"}if(""!=i){var a=this.content.getChildByName(e),c=u.prototype.getBattle(i);if("object"===(void 0===c?"undefined":o(c))){c.scaleX=1,c.y=50,c.parent=a,c.scaleX=a.scaleX,c.getComponent(cc.Label).string=s;var r=cc.callFunc(function(e){u.prototype.destroyBattle(e.name,e)},this),d=cc.sequence(cc.moveBy(.5,cc.v2(0,150)),cc.delayTime(.2),r);c.runAction(d)}}}},onRoleUpgrade:function(e){if(e.conid){c.users[e.conid].base=e.base;var t=this.content.getChildByName(e.conid),n=null;c.conid==e.conid?(c.curUser.base=e.base,c.curUser.ability=e.ability,s.roleAttr.showRolePage(c.curUser),n=t.getComponent(p)):n=t.getComponent(E),n&&n.onRoleUpgrade()}},onUserRevive:function(e){e.user;var t=this.content.getChildByName(e.conid),n=null;c.users[e.conid].base=e.userBase,c.conid==e.conid?(n=t.getComponent(p),s.roleBar&&s.roleBar.updateHpAndMana(c.users[c.conid].base)):n=t.getComponent(E),n&&n._userRevive()},onUpdaetZindex:function(e,t){e&&e.zIndex>=c.zIndex&&(c.zIndex=e.zIndex+1),t&&this._curNode&&(this._curNode.zIndex=c.zIndex)},removeEvent:function(){this.node.off(r.GAME_START_EVENT,this.onEvent,this),this.node.off(r.GAME_JOIN_EVENT,this.onEvent,this),this.node.off(r.GAME_LEAVE_ROOM,this.onEvent,this),this.node.off(r.FRAME_SYNC,this.onEvent,this),this.node.off(r.PK_STATUS_SYNC,this.onEvent,this),this.node.off(r.SWITCH_SHADOW,this.onEvent,this),this.node.off(r.SWITCH_DEFENSE,this.onEvent,this),this.node.off(r.CALCULA_DAMAGE,this.onEvent,this),this.node.off(r.ROLE_UPGRADE,this.onEvent,this),this.node.off(r.USER_REVIVE,this.onEvent,this)},onPhysics:function(e){cc.director.getPhysicsManager().enabled=e},onDestroy:function(){this.removeEvent(),console.log("Game\u9875\u9762\u9500\u6bc1")}}),cc._RF.pop()},{Damage:"Damage",Engine:"Engine",Func:"Func",GameData:"GameData",Glb:"Glb",LoadRes:"LoadRes",MapManager:"MapManager",Message:"Message",NodePool:"NodePool",Other:"Other",Player:"Player",Res:"Res",Response:"Response",UI:"UI"}],Glb:[function(e,t,n){"use strict";cc._RF.push(t,"f4c77dw+ntCPIyUNNCdCX9J","Glb");t.exports={url:"http://127.0.0.1:8888/",init:"init",login:"login",home:"home",game:"game",message:"message",isGameStart:!1,isGameOver:!1,disconnected:!1,userId:0,FPS:30},cc._RF.pop()},{}],Home:[function(e,t,n){"use strict";cc._RF.push(t,"d0c82CP7yZFVpfq5s39IpkY","Home");var o=e("Glb"),i=e("GameData"),s=e("Message"),a=e("Engine"),c=e("Response");cc.Class({extends:cc.Component,properties:{ui:cc.Node,returnLogin:cc.Node,selectRoles:cc.Node,startGame:cc.Node,userNameInput:cc.Node,labelInfo:{default:null,type:cc.Label}},onLoad:function(){var e=this;this.initLoad(),this.initEvent(e),this.initCreateUserName(),this.initSelectRole(),this.returnLogin.on(cc.Node.EventType.TOUCH_END,function(e){a.prototype.logout(),cc.director.loadScene("main")}),this.startGame.on(cc.Node.EventType.TOUCH_END,function(t){var n={conid:i.conid,roleId:e.curRoleNode.name};e.labelLog("\u6b63\u5728\u8bf7\u6c42\u670d\u52a1\u5668\uff0c\u8bf7\u7a0d\u7b49\uff01"),a.prototype.selectRole(n)})},initLoad:function(){try{G,a.prototype.routeRegistered(o.home)}catch(e){cc.director.loadScene("main")}},initCreateUserName:function(){var e=this;e.selectRoleNode=e.ui.getChildByName("selectRole"),e.createUserNameNode=e.ui.getChildByName("createUserName"),"2"==i.loginType?(e.selectRoleNode.active=!1,e.createUserNameNode.active=!0,e.confirmBtn=e.createUserNameNode.getChildByName("confirm"),e.confirmBtn.on(cc.Node.EventType.TOUCH_END,function(t){e.selectUserName=e.userNameInput.getComponent(cc.EditBox).string;var n={conid:i.conid,nm:e.selectUserName};a.prototype.createUserName(n)})):(e.selectRoleNode.active=!0,e.createUserNameNode.active=!1)},initSelectRole:function(){var e=this;e.curRoleNode=e.startGame.getChildByName("headFrame").children[0];var t=e.selectRoles.children;async.each(t,function(t,n){t.on(cc.Node.EventType.TOUCH_END,function(t){var n=t.currentTarget.children[0],o=n.getComponent(cc.Sprite).spriteFrame;e.curRoleNode.getComponent(cc.Sprite).spriteFrame=o,e.curRoleNode.name=n.name})},function(e){console.log(e)})},initEvent:function(e){c.prototype.init(e),this.node.on(s.HOME_CONNECT,this.onEvent,this),this.node.on(s.HOME_ERROR,this.onEvent,this),this.node.on(s.HOME_CREATE_USER,this.onEvent,this),this.node.on(s.HOME_SELECT_ROLE,this.onEvent,this)},onEvent:function(e){var t=e.detail;switch(void 0==t&&(t=e),e.type){case s.HOME_ERROR:switch(t.data.type){case 0:this.labelLog("\u5f53\u524d\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u6ce8\u518c")}break;case s.HOME_CREATE_USER:"1"==t.data.flg&&(this.selectRoleNode.active=!0,this.createUserNameNode.active=!1);break;case s.HOME_SELECT_ROLE:"1"==t.data.flg&&(this.labelLog("\u8bf7\u6c42\u670d\u52a1\u5668\u6210\u529f\uff0c\u51c6\u5907\u8fdb\u5165\u6e38\u620f"),cc.director.loadScene("game"))}},removeEvent:function(){this.node.off(s.HOME_CONNECT,this.onEvent,this),this.node.off(s.HOME_ERROR,this.onEvent,this),this.node.off(s.HOME_CREATE_USER,this.onEvent,this),this.node.off(s.HOME_SELECT_ROLE,this.onEvent,this)},labelLog:function(e){this.labelInfo.string="\n[LOG]: "+e},onDestroy:function(){this.removeEvent(),console.log("Home Destroy")}}),cc._RF.pop()},{Engine:"Engine",GameData:"GameData",Glb:"Glb",Message:"Message",Response:"Response"}],Joystick:[function(e,t,n){"use strict";cc._RF.push(t,"465c0o5cq5Et40tvB1rNZiq","Joystick");var o=e("GameData");cc.Class({extends:cc.Component,properties:{dot:cc.Node,left_Down:!1,right_Down:!1,up_Down:!1,down_Down:!1,posY:0,posX:0},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.ringRadius=this.node.width/2,this.joyStickX=this.node.getPosition().x,this.joyStickY=this.node.getPosition().y,this.initTouchEvent()},initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartEventHandle,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveEventHandle,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndEventHandle,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancelEventHandle,this)},onKeyDown:function(e){switch(e.keyCode){case 1003:this.up_Down=!0;break;case 1004:this.down_Down=!0;break;case 1e3:this.left_Down=!0;break;case 1001:this.right_Down=!0}this.gamepad()},onKeyUp:function(e){switch(e.keyCode){case 1003:this.up_Down=!1;break;case 1004:this.down_Down=!1;break;case 1e3:this.left_Down=!1;break;case 1001:this.right_Down=!1}this.gamepad()},gamepad:function(){this.posX=this.joyStickX,this.posY=this.joyStickY,this.up_Down||this.down_Down||this.left_Down||this.right_Down?(this.right_Down&&(this.posX=this.joyStickX+this.ringRadius/2,o.dir=1),this.up_Down&&(this.posY=this.joyStickY+this.ringRadius/2),this.down_Down&&(this.posY=this.joyStickY-this.ringRadius/2),this.left_Down&&(this.posX=this.joyStickX-this.ringRadius/2,o.dir=-1),this.dot.setPosition(cc.p(this.posX,this.posY)),o.angle=this.getAngle(cc.p(this.posX,this.posY)),o.speed=o.conSpeed):this.touchEndEventHandle()},touchStartEventHandle:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),n=this.joyStickX+t.x,o=this.joyStickY+t.y,i=this.getDistance(t,cc.p(0,0));return this.ringRadius>i&&(this.dot.setPosition(cc.p(n,o)),!0)},touchMoveEventHandle:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),n=this.joyStickX+t.x,i=this.joyStickY+t.y,s=this.getDistance(t,cc.p(0,0));if(this.ringRadius>s)this.dot.setPosition(cc.p(n,i));else{var a=this.node.getPosition().x+Math.cos(this.getRadian(cc.p(n,i)))*this.ringRadius,c=this.node.getPosition().y+Math.sin(this.getRadian(cc.p(n,i)))*this.ringRadius;this.dot.setPosition(cc.p(a,c))}t.x-this.joyStickX<0?o.dir=-1:t.x-this.joyStickX>0&&(o.dir=1),o.angle=this.getAngle(cc.p(n,i)),o.speed=o.conSpeed},touchEndEventHandle:function(){this.dot.setPosition(this.node.getPosition()),o.angle=null,o.speed=0},touchCancelEventHandle:function(){this.touchEndEventHandle()},getDistance:function(e,t){return e.sub(t).mag()},getAngle:function(e){return Math.atan2(e.y-this.joyStickY,e.x-this.joyStickX)*(180/Math.PI)},getRadian:function(e){return this.radian=Math.PI/180*this.getAngle(e)}}),cc._RF.pop()},{GameData:"GameData"}],KeyBoardCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"d37188gJ7lKKY2lpzimGxDj","KeyBoardCtrl");var o=e("GameData");cc.Class({extends:cc.Component,properties:{_left:!1,_right:!1,_moveDir:0},onLoad:function(){},_keyHandler:function(e,t){switch(console.log(e),e){case cc.macro.KEY.a:case cc.macro.KEY.left:this._left=t,this._updateMove(-1);break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._right=t,this._updateMove(1);break;case cc.macro.KEY.w:case cc.macro.KEY.up:break;case cc.macro.KEY.s:case cc.macro.KEY.down:break;case cc.macro.KEY[1]:t&&-1==o.keyCode&&(o.keyCode=1,console.log("key 1"));break;case cc.macro.KEY[2]:t&&(o.keyCode=2,console.log("key 2"));break;case cc.macro.KEY.q:case cc.macro.KEY.e:case cc.macro.KEY.space:break;default:return}},_updateMove:function(e){this._left&&this._right?this.move(e):this._left?this.move(-1):this._right?this.move(1):this.move(0)},move:function(e){this._moveDir!==e&&(this._moveDir=e)}}),cc._RF.pop()},{GameData:"GameData"}],KeyCodeCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"aa48bxH0vRMgqwroQjiB2Q6","KeyCodeCtrl");var o=e("GameData");function i(){}i.prototype={_moveDir:0,_moveDirY:0,_up:!1,_down:!1,_left:!1,_right:!1},i.prototype.init=function(e){this.context=e},i.prototype.onEventListener=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){0==this.ckKeyCode(e.keyCode)?this._keyHandler(e.keyCode,!1):1==this.ckKeyCode(e.keyCode)&&this._keyHandler(e.keyCode,!0)},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){0==this.ckKeyCode(e.keyCode)||1==this.ckKeyCode(e.keyCode)&&(this._keyHandler(e.keyCode,!1),this.toIdle())},this)},i.prototype.ckKeyCode=function(e){var t=0;switch(e){case cc.macro.KEY.a:case cc.macro.KEY.left:case cc.macro.KEY.d:case cc.macro.KEY.right:case cc.macro.KEY.w:case cc.macro.KEY.up:case cc.macro.KEY.s:case cc.macro.KEY.down:t=0;break;case cc.macro.KEY[1]:case cc.macro.KEY[2]:case cc.macro.KEY[3]:case cc.macro.KEY[4]:case cc.macro.KEY[5]:case cc.macro.KEY[6]:case cc.macro.KEY[7]:case cc.macro.KEY[8]:case cc.macro.KEY[9]:case cc.macro.KEY[0]:case cc.macro.KEY.q:case cc.macro.KEY.e:case cc.macro.KEY.f:case cc.macro.KEY.space:case cc.macro.KEY.num0:case cc.macro.KEY.num1:case cc.macro.KEY.num2:case cc.macro.KEY.num3:case cc.macro.KEY.num4:case cc.macro.KEY.num5:case cc.macro.KEY.num6:case cc.macro.KEY.num7:case cc.macro.KEY.num8:case cc.macro.KEY.num9:t=1}return t},i.prototype._moveHandler=function(e,t){if(o.state==o.stateEnum.IDLE||o.state==o.stateEnum.MOVE)switch(o.state=o.stateEnum.MOVE,e){case cc.macro.KEY.a:case cc.macro.KEY.left:this._left=t,t&&(o.face=-1);break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._right=t,t&&(o.face=1);break;case cc.macro.KEY.w:case cc.macro.KEY.up:this._up=t;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this._down=t}},i.prototype._keyHandler=function(e,t){if(o.state==o.stateEnum.IDLE||o.state==o.stateEnum.MOVE)switch(o.state=o.stateEnum.IDLE,e){case cc.macro.KEY[1]:t&&(o.speed=0,o.state=o.stateEnum.ATTACK,this.context.releaseSkill(1));break;case cc.macro.KEY[2]:t&&(o.speed=0,o.state=o.stateEnum.ATTACK,this.context.releaseSkill(2));break;case cc.macro.KEY[3]:t&&(o.speed=0,o.state=o.stateEnum.ATTACK,this.context.releaseSkill(3));break;case cc.macro.KEY[4]:case cc.macro.KEY[5]:case cc.macro.KEY[6]:case cc.macro.KEY[7]:case cc.macro.KEY[8]:case cc.macro.KEY[9]:case cc.macro.KEY[0]:break;case cc.macro.KEY.q:case cc.macro.KEY.e:case cc.macro.KEY.f:case cc.macro.KEY.space:t&&this.context.functionKeyHandle(e);break;case cc.macro.KEY.num0:case cc.macro.KEY.num1:case cc.macro.KEY.num2:case cc.macro.KEY.num3:case cc.macro.KEY.num4:case cc.macro.KEY.num5:case cc.macro.KEY.num6:case cc.macro.KEY.num7:case cc.macro.KEY.num8:case cc.macro.KEY.num9:t&&this.context.functionKeyHandle(e);break;default:return}},i.prototype.toIdle=function(){o.dir=0,o.dirY=0,o.angle=null,o.speed=0,o.state=o.stateEnum.IDLE},t.exports=i,cc._RF.pop()},{GameData:"GameData"}],KeyHandler:[function(e,t,n){"use strict";cc._RF.push(t,"a22fagDXTVKIaDV4oICxPx8","KeyHandler");var o=e("GameData");cc.Class({extends:cc.Component,properties:{_moveDir:0,_moveDirY:0,_up:!1,_down:!1,_left:!1,_right:!1},onLoad:function(){},_keyHandler:function(e,t){switch(e){case cc.macro.KEY.a:case cc.macro.KEY.left:this._left=t,this._updateMove(-1,o.dirY);break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._right=t,this._updateMove(1,o.dirY);break;case cc.macro.KEY.w:case cc.macro.KEY.up:this._up=t,this._updateMove(o.dir,1);break;case cc.macro.KEY.s:case cc.macro.KEY.down:this._down=t,this._updateMove(o.dir,-1);break;default:return}},_updateMove:function(e,t){this._left&&this._right?this._updateMoveY(e,t):this._left?this._updateMoveY(-1,t):this._right?this._updateMoveY(1,t):this._updateMoveY(0,t)},_updateMoveY:function(e,t){this._up&&this._down?this.move(e,t):this._up?this.move(e,1):this._down?this.move(e,-1):this.move(e,0)},move:function(e,t){this._moveDir===e&&this._moveDirY===t||(this._moveDir=e,this._moveDirY=t,o.dir=e,o.dirY=t,1==e?(o.angle=1==t?45:-1==t?-45:e,o.speed=o.conSpeed):-1==e?(o.angle=1==t?135:-1==t?-135:180*e,o.speed=o.conSpeed):1==t?(o.angle=90,o.speed=o.conSpeed):-1==t?(o.angle=-90,o.speed=o.conSpeed):(o.dir=0,o.dirY=0,o.angle=null,o.speed=0))}}),cc._RF.pop()},{GameData:"GameData"}],LoadRes:[function(e,t,n){"use strict";cc._RF.push(t,"3134dD9IHJNmJp3R/wZpJdk","LoadRes");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("Res");function s(){}s.prototype.init=function(){this.releaseAll()},s.prototype.loadPrefab=function(e,t){void 0==i.assets[e]?this.loadPrefabResDir(e,t):t(i.assets[e])},s.prototype.loadResDir=function(e,t){this.release(e),cc.loader.loadResDir(e,function(n,o){var s={};async.each(o,function(e,t){var n=e.toString();n||(n=e instanceof cc.JsonAsset?JSON.stringify(e.json,null,4):n||e.name||cc.js.getClassName(e)),s[n]=e,setTimeout(function(){t(null)},e)},function(n){n?console.log(n):(i.assets[e]=s,t(s))})})},s.prototype.loadPrefabResDir=function(e,t){this.release(e),cc.loader.loadResDir(e,function(n,o){var s={};async.each(o,function(e,t){var n=e.toString();n||(n=e instanceof cc.JsonAsset?JSON.stringify(e.json,null,4):n||e.name||cc.js.getClassName(e)),s[e.data.name]=e,t()},function(n){n?console.log(n):(i.assets[e]=s,t(s))})})},s.prototype.releaseAll=function(){this.release(i.prefab.role),this.release(i.prefab.shadow),this.release(i.prefab.skill),this.release(i.prefab.ui)},s.prototype.release=function(e){async.each(i.assets[e],function(e,t){if("object"!==(void 0===e?"undefined":o(e))||e._uuid){var n=cc.loader.getDependsRecursively(e);cc.loader.release(n)}},function(e){e&&console.log(e)})},t.exports=s,cc._RF.pop()},{Res:"Res"}],Login:[function(e,t,n){"use strict";cc._RF.push(t,"c1b3bPglNVIb4OYw47+jor2","Login");e("Manage");var o=e("Message"),i=e("Engine"),s=e("Response"),a=e("GameData");cc.Class({extends:cc.Component,properties:{_isconnect:!1,_loginType:0,_userData:{default:{}},accountInput:cc.Node,passwordInput:cc.Node,login:cc.Node,register:cc.Node,labelInfo:{default:null,type:cc.Label}},onLoad:function(){var e=this;this.initData(),this.initEvent(e),this.login.on(cc.Node.EventType.TOUCH_END,function(t){e._userData.account=e.accountInput.getComponent(cc.EditBox).string,e._userData.password=e.passwordInput.getComponent(cc.EditBox).string,""!=e._userData.account?""!=e._userData.password?(e._loginType=1,e.handleLogin()):e.labelLog("\u8bf7\u8f93\u5165\u5bc6\u7801"):e.labelLog("\u8bf7\u8f93\u5165\u8d26\u53f7")}),this.register.on(cc.Node.EventType.TOUCH_END,function(t){e._userData.account=e.accountInput.getComponent(cc.EditBox).string,e._userData.password=e.passwordInput.getComponent(cc.EditBox).string,""!=e._userData.account?""!=e._userData.password?(e._loginType=2,e.handleLogin()):e.labelLog("\u8bf7\u8f93\u5165\u5bc6\u7801"):e.labelLog("\u8bf7\u8f93\u5165\u8d26\u53f7")})},initData:function(){window.G=new cc.Class({}),G.engine=i,i.prototype.instance()},initEvent:function(e){s.prototype.init(e),this.node.on(o.MEVENT_RE_CONNECT,this.onEvent,this),this.node.on(o.MEVENT_ERROE_MSG,this.onEvent,this),this.node.on(o.MEVENT_INIT,this.onEvent,this),this.node.on(o.MEVENT_REGISTER_USER,this.onEvent,this),this.node.on(o.MEVENT_LOGIN_CONNECT,this.onEvent,this),this.node.on(o.MEVENT_LOGIN,this.onEvent,this),this.node.on(o.MEVENT_LOGIN_ERROR,this.onEvent,this),this.node.on(o.MEVENT_WX_BINDING,this.onEvent,this)},onEvent:function(e){var t=e.detail;switch(void 0==t&&(t=e),e.type){case o.MEVENT_INIT:this.labelLog("\u521d\u59cb\u5316\u6210\u529f");break;case o.MEVENT_LOGIN_CONNECT:this._isconnect=!0,this.handleLogin();break;case o.MEVENT_LOGIN_ERROR:switch(t.data.type){case 1:this.labelLog("\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u8bef");break;case 2:this.labelLog("\u8d26\u53f7\u5df2\u7ecf\u88ab\u6ce8\u518c\u4e86")}break;case o.MEVENT_LOGIN:this.labelLog("\u767b\u5f55\u6210\u529f"),a.loginType=t.data.type,a.conid=t.data.conid,cc.director.loadScene("home")}},handleLogin:function(){this._isconnect?1==this._loginType?i.prototype.login(this._userData):2==this._loginType&&i.prototype.register(this._userData):i.prototype.init()},getUserFromWeChat:function(e){try{getWxUserInfo(function(e){getUserOpenID(function(t){e.openInfos=t})})}catch(e){console.warn("getUserFromWeChat for error:"+e.message),console.log("\u4e0d\u662f\u5728\u5fae\u4fe1\u5e73\u53f0\uff0c\u8c03\u7528\u4e0d\u8fdb\u884c\u7ed1\u5b9a\uff01"),i.prototype.instance()}},removeEvent:function(){this.node.off(o.MEVENT_ERROE_MSG,this.onEvent,this),this.node.off(o.MEVENT_INIT,this.onEvent,this),this.node.off(o.MEVENT_REGISTER_USER,this.onEvent,this),this.node.off(o.MEVENT_LOGIN_CONNECT,this.onEvent,this),this.node.off(o.MEVENT_LOGIN,this.onEvent,this),this.node.off(o.MEVENT_LOGIN_ERROR,this.onEvent,this),this.node.off(o.MEVENT_WX_BINDING,this.onEvent,this),this.node.off(o.MEVENT_RE_CONNECT,this.onEvent,this)},labelLog:function(e){this.labelInfo.string="\n[LOG]: "+e},onDestroy:function(){this.removeEvent(),console.log("Login\u9875\u9762\u9500\u6bc1")}}),cc._RF.pop()},{Engine:"Engine",GameData:"GameData",Manage:"Manage",Message:"Message",Response:"Response"}],Manage:[function(e,t,n){"use strict";var o;cc._RF.push(t,"4d466uZ41xKV7eEwhtEhBHB","Manage");try{console.log("load manage"),o=io}catch(e){console.warn("load manage fail,"+e.message)}t.exports={engine:o,connect:{}},cc._RF.pop()},{}],MapManager:[function(e,t,n){"use strict";cc._RF.push(t,"2b033POR91JupJfYIqXHfhh","MapManager");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(e("Res"),e("LoadRes"),e("NodePool"));t.exports={init:function(e){this.Canvas=cc.find("Canvas")},loadMap:function(e,t){var n=i.prototype.getMap(t);"object"!==(void 0===n?"undefined":o(n))&&(n=i.prototype.getMap("1")),e.addChild(n)},child:function(e,t){return e?-1==t.indexOf("/")?e.getChildByName(t):cc.find("Canvas/UI/"+e.name+"/"+t):null}},cc._RF.pop()},{LoadRes:"LoadRes",NodePool:"NodePool",Res:"Res"}],Menu:[function(e,t,n){"use strict";cc._RF.push(t,"be4f7NSLzlLdp2J4GGP1fyp","Menu"),cc.Class({extends:cc.Component,properties:{skillBtn:cc.Node,scrollView:{default:null,type:cc.ScrollView}},onLoad:function(){var e=this;this.skillBtn.on(cc.Node.EventType.TOUCH_END,function(t){e.scrollView.node.active=!e.scrollView.node.active})}}),cc._RF.pop()},{}],Message:[function(e,t,n){"use strict";cc._RF.push(t,"d628fGihyNAZIjkCiQKznX3","Message");t.exports={MEVENT_INIT:"MEVENT_INIT",MEVENT_REGISTER_USER:"MEVENT_REGISTER_USER",MEVENT_LOGIN_CONNECT:"MEVENT_LOGIN_CONNECT",MEVENT_LOGIN:"MEVENT_LOGIN",MEVENT_LOGIN_ERROR:"MEVENT_LOGIN_ERROR",MEVENT_RE_CONNECT:"MEVENT_RE_CONNECT",MEVENT_ERROE_MSG:"MEVENT_ERROE_MSG",MEVENT_JOIN_ROOM_RSP:"MEVENT_JOIN_ROOM_RSP",MEVENT_JOIN_ROOM_NOTIFY:"MEVENT_JOIN_ROOM_NOTIFY",MEVENT_LEAVE_ROOM:"MEVENT_LEAVE_ROOM",MEVENT_LEAVE_ROOM_NOTIFY:"MEVENT_LEAVE_ROOM_NOTIFY",MEVENT_JOIN_OVER_RSP:"MEVENT_JOIN_OVER_RSP",MEVENT_JOIN_OVER_NOTIFY:"MEVENT_JOIN_OVER_NOTIFY",MEVENT_JOIN_OPEN_RSP:"MEVENT_JOIN_OPEN_RSP",MEVENT_JOIN_OPEN_NOTIFY:"MEVENT_JOIN_OPEN_NOTIFY",MEVENT_ROOM_LIST_EX:"MEVENT_ROOM_LIST_EX",MEVENT_CREATE_ROOM:"MEVENT_CREATE_ROOM",MEVENT_ROOM_DETAIL:"MEVENT_ROOM_DETAIL",MEVENT_KICK_PLAYER:"MEVENT_KICK_PLAYER",MEVENT_KICK_PLAYER_NOTIFY:"MEVENT_KICK_PLAYER_NOTIFY",MEVENT_SET_ROOM_PROPETY:"MEVENT_SET_ROOM_PROPETY",MEVENT_SET_ROOM_PROPETY_NOTIFY:"MEVENT_SET_ROOM_PROPETY_NOTIFY",MEVENT_SEND_EVENT_RSP:"MEVENT_SEND_EVENT_RSP",MEVENT_SEND_EVENT_NOTIFY:"MEVENT_SEND_EVENT_NOTIFY",MEVENT_FRAME_UPDATE:"MEVENT_FRAME_UPDATE",MEVENT_WX_BINDING:"MEVENT_WX_BINDING",MEVENT_NETWORK_STATE_NOTIFY:"MEVENT_NETWORK_STATE_NOTIFY",MEVENT_SET_FRAME_SYNC_RSP:"MEVENT_SET_FRAME_SYNC_RSP",EVENT_GAME_START:"EVENT_GAME_START",NEW_STAR_POSITION:"NEW_STAR_POSITION",PLAYER_POSINTON:"PLAYER_POSINTON",DESTROY_NODE:"DESTROY_NODE",HOME_CONNECT:"HOME_CONNECT",HOME_ERROR:"homeError",HOME_CREATE_USER:"homeCreateUser",HOME_SELECT_ROLE:"homeSelectRole",GAME_START_EVENT:"gameStart",GAME_JOIN_EVENT:"gameJoin",GAME_LEAVE_ROOM:"GAME_LEAVE_ROOM",FRAME_SYNC:"FRAME_SYNC",PK_STATUS_SYNC:"PK_STATUS_SYNC",SWITCH_SHADOW:"switchShadow",SWITCH_DEFENSE:"switchDefense",CALCULA_DAMAGE:"calcula_damage",ROLE_UPGRADE:"role_upgrade",USER_REVIVE:"USER_REVIVE",EVENT_NEW_START:"newStar",PLAYER_MOVE_EVENT:"playerMove",EVENT_GAIN_SCORE:"gainScore",POSINTON_CHANGED:"playerPosition",EVENT_ATTACK:"actionAttack",GAME_RECONNECT:"Reconnect"},cc._RF.pop()},{}],NodePool:[function(e,t,n){"use strict";cc._RF.push(t,"6e09dfqeSFL6bMEhavPhPgt","NodePool");var o=e("Res"),i={},s=[];function a(){}a.prototype.init=function(e){this.context=e},a.prototype.instanceUI=function(e){this.instance(o.prefab.ui,e,1)},a.prototype.instanceMap=function(){this.instance(o.prefab.map,"1",1)},a.prototype.instanceShadow=function(){this.instance(o.prefab.shadow,"001",1),this.instance(o.prefab.shadow,"002",1)},a.prototype.instanceDefense=function(){this.instance(o.prefab.defense,"xuzuo_in",1),this.instance(o.prefab.defense,"xuzuo_out",1)},a.prototype.instanceSkill=function(){this.instance(o.prefab.skill,"001",1),this.instance(o.prefab.skill,"002",1),this.instance(o.prefab.skill,"003",1)},a.prototype.instanceOther=function(){this.instance(o.prefab.other,"levelup",1)},a.prototype.instanceBattle=function(){this.instance(o.prefab.battle,"damage",1),this.instance(o.prefab.battle,"nohit",1),this.instance(o.prefab.battle,"invincible",1)},a.prototype.instanceRole=function(e){s.hasOwnProperty(e)||(this.instance(o.prefab.role,e,1),s.push(e))},a.prototype.instance=function(e,t,n){var s=o.assets[e][t];if(s){var a=new cc.NodePool,c={};void 0!=i[e]&&(c=i[e]);for(var r=0;r<n;++r){var d=cc.instantiate(s);a.put(d)}c[t]=a,i[e]=c}},a.prototype.getNode=function(e,t){var n=null,s=i[e][t];if(s.size()>0)n=s.get();else{var a=o.assets[e][t];n=cc.instantiate(a)}return n},a.prototype.getNodes=function(e){return i[e]},a.prototype.getRoleNodes=function(){return this.getNodes(o.prefab.role)},a.prototype.getUI=function(e){return this.getNode(o.prefab.ui,e)},a.prototype.getMap=function(e){return this.getNode(o.prefab.map,e)},a.prototype.getRole=function(e){return this.getNode(o.prefab.role,e)},a.prototype.getShadow=function(e){return this.getNode(o.prefab.shadow,e)},a.prototype.getDefense=function(e){return this.getNode(o.prefab.defense,e)},a.prototype.getSkill=function(e){return this.getNode(o.prefab.skill,e)},a.prototype.getBattle=function(e){return this.getNode(o.prefab.battle,e)},a.prototype.getOther=function(e){return this.getNode(o.prefab.other,e)},a.prototype.destroy=function(e,t,n){i[e][t].put(n)},a.prototype.destroyRole=function(e,t){this.destroy(o.prefab.role,e,t)},a.prototype.destroyShadow=function(e,t){this.destroy(o.prefab.shadow,e,t)},a.prototype.destroyDefense=function(e,t){this.destroy(o.prefab.defense,e,t)},a.prototype.destroySkill=function(e,t){this.destroy(o.prefab.skill,e,t)},a.prototype.destroyBattle=function(e,t){this.destroy(o.prefab.battle,e,t)},a.prototype.destroyOther=function(e,t){this.destroy(o.prefab.other,e,t)},a.prototype.destroyMap=function(e,t){this.destroy(o.prefab.map,e,t)},a.prototype.clear=function(e,t){i[e][t].clear(),delete i[e][t]},t.exports=a,cc._RF.pop()},{Res:"Res"}],Other:[function(e,t,n){"use strict";cc._RF.push(t,"a75beJsKglBRZ1rq8m/07MN","Other");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("GameData"),s=e("AnimCtrl"),a=e("DragonBonesAnim"),c=e("NodePool"),r=e("Skill");cc.Class({extends:cc.Component,properties:{_content:{default:null,type:cc.Node},_userInfo:null,_syncDatas:[],_syncActions:[],_conid:null,maxSpeed:1e3},onSetSyncData:function(e){this._syncDatas.unshift(e)},onSetSyncAction:function(e){this._syncActions.unshift(e)},onLoad:function(){this.state=G.stateEnum.IDLE,this.isRelease=!1,this._moveFlags=0,this._body=this.node.getChildByName("body"),this._animCtrl=this._body.getComponent(s),this.rigidBody=this.getComponent(cc.RigidBody),this.rigidBody.enabledContactListener=!0,this.rigidBody.gravityScale=i.gravity,this._shadowBody=this.node.getChildByName("shadow"),this._shadowBody&&(this._shadowAnimCtrl=this._shadowBody.getComponent(s))},update:function(e){this.updateStatus(),this.updateMove(e),this.updateSyncAction(e)},fastSyncData:function(){if(!(this._syncDatas.length<=0)){var e=this._syncDatas.pop();return this.node.x=e.x,this.node.y=e.y,this.fastSyncData(),e}},updateShadowStatus:function(e,t){e?(this.resetUserStatusByFlg("shadow"),this.shadow=this.node.getChildByName("shadow"),this.shadow||(this.shadow=c.prototype.getShadow(t),this.shadow.key=t,this.shadow.name="shadow",this.shadow.x=0,this.shadow.y=-20,this.shadow.scaleX=1,this.shadow.scaleY=1,this.shadow.opacity=230,this.shadow.parent=this.node)):(this.shadow=this.node.getChildByName("shadow"),this.shadow&&(this._shadowAnimCtrl=null,c.prototype.destroyShadow(this.shadow.key,this.shadow)))},updateDefenseStatus:function(e){e?(this.resetUserStatusByFlg("defense"),this.defense_in=this.node.getChildByName("defense_in"),this.defense_out=this.node.getChildByName("defense_out"),this.defense_in||(this.defense_in=c.prototype.getDefense("xuzuo_in"),this.defense_in.key="xuzuo_in",this.defense_in.name="defense_in",this.defense_in.x=0,this.defense_in.y=100,this.defense_in.scaleX=-.5,this.defense_in.scaleY=.45,this.defense_in.opacity=200,this.defense_in.parent=this.node,this.defense_in.zIndex=this._body.zIndex-1),this.defense_out||(this.defense_out=c.prototype.getDefense("xuzuo_out"),this.defense_out.key="xuzuo_out",this.defense_out.name="defense_out",this.defense_out.x=0,this.defense_out.y=100,this.defense_out.scaleX=-.5,this.defense_out.scaleY=.45,this.defense_out.opacity=200,this.defense_out.parent=this.node,this.defense_out.zIndex=this._body.zIndex+1)):(this.defense_in=this.node.getChildByName("defense_in"),this.defense_in&&c.prototype.destroyDefense(this.defense_in.key,this.defense_in),this.defense_out=this.node.getChildByName("defense_out"),this.defense_out&&c.prototype.destroyDefense(this.defense_out.key,this.defense_out))},onRoleUpgrade:function(){var e=c.prototype.getOther("levelup");if(e){var t=e.getComponent(a);e.parent=this.node,e.x=0,e.y=0,t.run("Sprite",function(){c.prototype.destroyOther("levelup",e)})}},resetUserStatusByFlg:function(e){switch(e){case"defense":this.shadow&&(this._shadowAnimCtrl=null,c.prototype.destroyShadow(this.shadow.key,this.shadow));break;case"shadow":this.defense_in=this.node.getChildByName("defense_in"),this.defense_in&&c.prototype.destroyDefense(this.defense_in.key,this.defense_in),this.defense_out=this.node.getChildByName("defense_out"),this.defense_out&&c.prototype.destroyDefense(this.defense_out.key,this.defense_out)}},updateStatus:function(){G.func.getUser(this.node.conid).base.hp<=0&&(this.state=G.stateEnum.DEAD,this._animCtrl._userDead(),this.shadowAnimCtrl(function(e){e._userDead()}))},shadowAnimCtrl:function(e){(this._shadowAnimCtrl||(this._shadowBody=this.node.getChildByName("shadow"),this._shadowBody&&(this._shadowAnimCtrl=this._shadowBody.getComponent(s)),this._shadowAnimCtrl))&&e(this._shadowAnimCtrl)},shadowNode:function(e){(this._shadowBody||(this._shadowBody=this.node.getChildByName("shadow"),this._shadowBody))&&e(this._shadowBody)},_userDead:function(){},_userRevive:function(){this.state==G.stateEnum.DEAD&&(this._animCtrl._userRevive(),this.state=G.stateEnum.IDLE,this.shadowAnimCtrl(function(e){e._userRevive()}))},updateMove:function(e){if(this.state!=G.stateEnum.DEAD){var t=this.rigidBody.linearVelocity;if(this._syncDatas.length>0){var n=this.fastSyncData();t=n.speed,this._moveFlags=n.moveFlags,this.node.scaleX=n.dir,this._body.isground=n.isground,this.shadowNode(function(e){e.isground=n.isground})}1===this._moveFlags?(this.node.scaleX>0&&(this.node.scaleX*=-1,this._userInfo.viewInfoNode.scaleX=this.node.scaleX),t.x=-this._userInfo.user.base.speed):2===this._moveFlags?(this.node.scaleX<0&&(this.node.scaleX*=-1,this._userInfo.viewInfoNode.scaleX=this.node.scaleX),t.x=this._userInfo.user.base.speed):t.x=0,this.rigidBody.linearVelocity=this._animCtrl.speedLimitMove(t),this._animCtrl._updateAnim(this._moveFlags,t),this.shadowAnimCtrl(function(e){e._updateAnim(self._moveFlags,t)})}},updateSyncAction:function(e){if(0!=this._syncActions.length){var t=this,n=this._syncActions.pop();t.isRelease=!0,this._animCtrl._updateAttack(n.key,function(){t.isRelease=!1}),this.shadowAnimCtrl(function(e){e._updateAttack(n.key,function(){})});var i=n.skill,s=c.prototype.getSkill(i.pk);if("object"===(void 0===s?"undefined":o(s))){var a=s.getComponent(r);t._content.addChild(s),a.releaseSkill(t.node,s,i)}}}}),cc._RF.pop()},{AnimCtrl:"AnimCtrl",DragonBonesAnim:"DragonBonesAnim",GameData:"GameData",NodePool:"NodePool",Skill:"Skill"}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"86045qU1ppLrZrzhp8kk3M4","Player");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("GameData"),s=e("Engine"),a=e("Glb"),c=e("Message"),r=e("AnimCtrl"),d=e("DragonBonesAnim"),l=e("KeyCodeCtrl"),h=e("NodePool"),u=e("Skill");cc.Class({extends:cc.Component,properties:{_content:{default:null,type:cc.Node},_userInfo:null,_frameSync:null,_syncActions:[],_preRoleStatus:null,mainCamera:{default:null,type:cc.Node},maxSpeed:1e3,jumps:3,jumpSpeed:2e3},onSetSyncAction:function(e){this._syncActions.unshift(e)},setSynsData:function(){if(this.ckRoleStatusChange()){var e={conid:i.conid,action:c.POSINTON_CHANGED,x:this.node.x,y:this.node.y,moveFlags:this._moveFlags,dir:this.node.scaleX,speed:this.rigidBody.linearVelocity,isground:this._body.isground};s.prototype.updateFrame(e)}},setPreRoleStatus:function(){this._preRoleStatus={x:this.node.x,y:this.node.y,dir:this.node.scaleX,moveFlags:this._moveFlags,speed:this.rigidBody.linearVelocity}},ckRoleStatusChange:function(){var e=!1;return this._moveFlags!=this._preRoleStatus.moveFlags?e=!0:this.node.scaleX!=this._preRoleStatus.dir?e=!0:this.node.y!=this._preRoleStatus.y?e=!0:this.rigidBody.linearVelocity.x!=this._preRoleStatus.speed.x?e=!0:this.rigidBody.linearVelocity.y!=this._preRoleStatus.speed.y&&(e=!0),this.setPreRoleStatus(),e},onLoad:function(){var e=this;G.state=G.stateEnum.IDLE,this.state=G.stateEnum.IDLE,this._moveFlags=0,this._up=!1,this.isRelease=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),l.prototype.init(e),l.prototype.onEventListener(),this._frameSync=setInterval(function(){e.setSynsData()},1e3/a.FPS),this.mainCamera=cc.find("Canvas/Main Camera"),this.regionlimit=cc.find("Canvas/regionlimit"),this._body=this.node.getChildByName("body"),this._animCtrl=this._body.getComponent(r),this._shadowBody=this.node.getChildByName("shadow"),this._shadowBody&&(this._shadowAnimCtrl=this._shadowBody.getComponent(r)),this.rigidBody=this.getComponent(cc.RigidBody),this.rigidBody.enabledContactListener=!0,this.rigidBody.gravityScale=i.gravity,e.setPreRoleStatus()},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:this._moveFlags|=1;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._moveFlags|=2;break;case cc.macro.KEY.up:this._upPressed||(this._up=!0),this._upPressed=!0;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.node.jumpDown=!0}this.setSynsData()},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:this._moveFlags&=-2;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this._moveFlags&=-3;break;case cc.macro.KEY.up:this._upPressed=!1;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.node.jumpDown=!1}this.setSynsData()},update:function(e){this.updateStatus(),this.updateMove(e),this.updateSyncAction(e)},releaseSkill:function(e){if(this.state!=G.stateEnum.DEAD){if(this._animCtrl.releaseSkillLimit(this.rigidBody.linearVelocity)&&!this.isRelease){this.isRelease=!0;var t={conid:i.conid,action:c.EVENT_ATTACK,key:e,x:this.node.x,y:this.node.y};s.prototype.pkStatusSync(t)}}},functionKeyHandle:function(e){switch(console.log("keyCode",e),e){case cc.macro.KEY.num0:break;case cc.macro.KEY.space:var t=this.rigidBody.linearVelocity;t.y=this.jumpSpeed,this.rigidBody.linearVelocity=this._animCtrl.speedLimitMove(t),this.node.y+=500;break;case cc.macro.KEY.q:this.onSwitchShadow("001");break;case cc.macro.KEY.e:this.onSwitchShadow("002");break;case cc.macro.KEY.f:this.onSwitchDefense();break;default:return}},onSwitchShadow:function(e){var t={conid:i.conid,shadowkey:e};s.prototype.switchShadow(t)},onSwitchDefense:function(){var e={conid:i.conid};s.prototype.switchDefense(e)},updateShadowStatus:function(e,t){e?(this.resetUserStatusByFlg("shadow"),this.shadow=this.node.getChildByName("shadow"),this.shadow||(this.shadow=h.prototype.getShadow(t),this.shadow.key=t,this.shadow.name="shadow",this.shadow.x=0,this.shadow.y=-20,this.shadow.scaleX=1,this.shadow.scaleY=1,this.shadow.opacity=230,this.shadow.parent=this.node)):(this.shadow=this.node.getChildByName("shadow"),this.shadow&&(this._shadowAnimCtrl=null,h.prototype.destroyShadow(this.shadow.key,this.shadow)))},updateDefenseStatus:function(e){e?(this.resetUserStatusByFlg("defense"),this.defense_in=this.node.getChildByName("defense_in"),this.defense_out=this.node.getChildByName("defense_out"),this.defense_in||(this.defense_in=h.prototype.getDefense("xuzuo_in"),this.defense_in.key="xuzuo_in",this.defense_in.name="defense_in",this.defense_in.x=0,this.defense_in.y=100,this.defense_in.scaleX=-.5,this.defense_in.scaleY=.45,this.defense_in.opacity=200,this.defense_in.parent=this.node,this.defense_in.zIndex=this._body.zIndex-1),this.defense_out||(this.defense_out=h.prototype.getDefense("xuzuo_out"),this.defense_out.key="xuzuo_out",this.defense_out.name="defense_out",this.defense_out.x=0,this.defense_out.y=100,this.defense_out.scaleX=-.5,this.defense_out.scaleY=.45,this.defense_out.opacity=200,this.defense_out.parent=this.node,this.defense_out.zIndex=this._body.zIndex+1)):(this.defense_in=this.node.getChildByName("defense_in"),this.defense_in&&h.prototype.destroyDefense(this.defense_in.key,this.defense_in),this.defense_out=this.node.getChildByName("defense_out"),this.defense_out&&h.prototype.destroyDefense(this.defense_out.key,this.defense_out))},onRoleUpgrade:function(){var e=h.prototype.getOther("levelup");if(e){var t=e.getComponent(d);e.parent=this.node,e.x=0,e.y=0,t.run("Sprite",function(){h.prototype.destroyOther("levelup",e)})}},resetUserStatusByFlg:function(e){switch(e){case"defense":this.shadow&&(this._shadowAnimCtrl=null,h.prototype.destroyShadow(this.shadow.key,this.shadow));break;case"shadow":this.defense_in=this.node.getChildByName("defense_in"),this.defense_in&&h.prototype.destroyDefense(this.defense_in.key,this.defense_in),this.defense_out=this.node.getChildByName("defense_out"),this.defense_out&&h.prototype.destroyDefense(this.defense_out.key,this.defense_out)}},updateStatus:function(){G.func.getUser().base.hp<=0&&(this.state=G.stateEnum.DEAD,G.state=G.stateEnum.DEAD,this._animCtrl._userDead(),this.shadowAnimCtrl(function(e){e._userDead()}))},shadowAnimCtrl:function(e){(this._shadowAnimCtrl||(this._shadowBody=this.node.getChildByName("shadow"),this._shadowBody&&(this._shadowAnimCtrl=this._shadowBody.getComponent(r)),this._shadowAnimCtrl))&&e(this._shadowAnimCtrl)},shadowNode:function(e){(this._shadowBody||(this._shadowBody=this.node.getChildByName("shadow"),this._shadowBody))&&e(this._shadowBody)},_userDead:function(){},_userRevive:function(){this.state==G.stateEnum.DEAD&&(this._animCtrl._userRevive(),this.shadowAnimCtrl(function(e){e._userRevive()}),this.state=G.stateEnum.IDLE)},updateMove:function(e){if(this.state!=G.stateEnum.DEAD){var t=this,n=this.rigidBody.linearVelocity;1===this._moveFlags?(this.node.scaleX>0&&(this.node.scaleX*=-1,this._userInfo.viewInfoNode.scaleX=this.node.scaleX),n.x=-this._userInfo.user.base.speed):2===this._moveFlags?(this.node.scaleX<0&&(this.node.scaleX*=-1,this._userInfo.viewInfoNode.scaleX=this.node.scaleX),n.x=this._userInfo.user.base.speed):n.x=0,Math.abs(n.y)<1&&(this.jumps=3),this.jumps>0&&this._up&&(n.y=this.jumpSpeed,this.jumps--),this._up=!1,this.rigidBody.linearVelocity=this._animCtrl.speedLimitMove(n),this._animCtrl._updateAnim(this._moveFlags,n),this.shadowAnimCtrl(function(e){e._updateAnim(t._moveFlags,n)}),this.cameraFollow(this.node,this.mainCamera)}},updateSyncAction:function(e){if(0!=this._syncActions.length){var t=this,n=this._syncActions.pop();this._animCtrl._updateAttack(n.key,function(){i.state=i.stateEnum.IDLE,t.isRelease=!1}),this.shadowAnimCtrl(function(e){e._updateAttack(n.key,function(){i.state=i.stateEnum.IDLE})});var s=n.skill,a=h.prototype.getSkill(s.pk);if("object"===(void 0===a?"undefined":o(a))){var c=a.getComponent(u);t._content.addChild(a),a.conid=t.node.conid,a.sk=n.sk,c.releaseSkill(t.node,a,s)}}},cameraFollow:function(e,t){t.x=e.x,t.y=e.y+350},onCheckRoleIsGroundCollider:function(e,t,n){"role"==e.node.group&&"ground"==t.node.group&&n(e.node),"role"==t.node.group&&"ground"==e.node.group&&n(t.node)},onBeginContact:function(e,t,n){var o=this;this.onCheckRoleIsGroundCollider(t,n,function(e){e.getChildByName("body").isground=!0,o.shadowNode(function(e){e.isground=!0})}),n.node.group},onEndContact:function(e,t,n){var o=this;this.onCheckRoleIsGroundCollider(t,n,function(e){e.getChildByName("body").isground=!1,o.shadowNode(function(e){e.isground=!1})}),n.node.group},onDestroy:function(){console.log("\u4eba\u7269\u8282\u70b9\u9500\u6bc1"),this._frameSync&&clearInterval(this._frameSync)}}),cc._RF.pop()},{AnimCtrl:"AnimCtrl",DragonBonesAnim:"DragonBonesAnim",Engine:"Engine",GameData:"GameData",Glb:"Glb",KeyCodeCtrl:"KeyCodeCtrl",Message:"Message",NodePool:"NodePool",Skill:"Skill"}],Portal:[function(e,t,n){"use strict";cc._RF.push(t,"a6a9brYFA5MFbFdD9zgxPJs","Portal");e("MapManager");cc.Class({extends:cc.Component,properties:{mapName:"1"},start:function(){console.log(this.mapName)}}),cc._RF.pop()},{MapManager:"MapManager"}],Response:[function(e,t,n){"use strict";cc._RF.push(t,"47815StMZFBNadzW+ZKDeXO","Response");var o=e("Manage"),i=e("Message"),s=(e("Engine"),e("Glb"));function a(){}a.prototype.init=function(e){this.context=e},a.prototype.bind=function(e){var t=o.connect[e];switch(e){case s.init:this.initResponse(t);break;case s.login:this.loginResponse(t);break;case s.home:this.homeResponse(t);break;case s.game:this.gameResponse(t)}},a.prototype.initResponse=function(e){var t=this;e.on("connection",function(e){0==e&&(console.log("connect success!"),t.context.node.emit(i.MEVENT_INIT,{status:200,type:i.MEVENT_INIT}))}),e.on("disconnect",function(e){console.log(e),cc.director.loadScene("main")}),e.on("error",function(e){console.log(e),cc.director.loadScene("main")})},a.prototype.loginResponse=function(e){var t=this;e.on("connect",function(){console.log("\u6ce8\u518c\u767b\u5f55\u8fde\u63a5\u6210\u529f"),t.context.node.emit(i.MEVENT_LOGIN_CONNECT,{type:i.MEVENT_LOGIN_CONNECT})}),e.on("err",function(e){var n=t.jsonData(e);t.context.node.emit(i.MEVENT_LOGIN_ERROR,{data:n,type:i.MEVENT_LOGIN_ERROR})}),e.on("login",function(e){console.log("\u767b\u5f55\u6210\u529f");var n=t.jsonData(e);t.context.node.emit(i.MEVENT_LOGIN,{data:n,type:i.MEVENT_LOGIN})})},a.prototype.homeResponse=function(e){var t=this;e.on("connect",function(){console.log("\u6ce8\u518chome\u8fde\u63a5\u6210\u529f"),t.context.node.emit(i.HOME_CONNECT,{type:i.HOME_CONNECT})}),e.on("err",function(e){var n=t.jsonData(e);t.context.node.emit(i.HOME_ERROR,{data:n,type:i.HOME_ERROR})}),e.on("onCreateUserName",function(e){var n=t.jsonData(e);t.context.node.emit(i.HOME_CREATE_USER,{data:n,type:i.HOME_CREATE_USER})}),e.on("onSelectRole",function(e){var n=t.jsonData(e);t.context.node.emit(i.HOME_SELECT_ROLE,{data:n,type:i.HOME_SELECT_ROLE})})},a.prototype.gameResponse=function(e){var t=this;e.on("connect",function(){console.log("\u6ce8\u518cgame\u8fde\u63a5\u6210\u529f")}),e.on("start",function(e){console.log("\u8fdb\u5165\u6e38\u620f\u6210\u529f");var n=t.jsonData(e);t.context.node.emit(i.GAME_START_EVENT,{data:n,type:i.GAME_START_EVENT})}),e.on("join",function(e){console.log("other\u8fdb\u5165\u6e38\u620f\u6210\u529f");var n=t.jsonData(e);t.context.node.emit(i.GAME_JOIN_EVENT,{data:n,type:i.GAME_JOIN_EVENT})}),e.on("leave",function(e){console.log("other leave");var n=t.jsonData(e);t.context.node.emit(i.GAME_LEAVE_ROOM,{data:n,type:i.GAME_LEAVE_ROOM})}),e.on("frameSync",function(e){var n=t.jsonData(e);t.context.node.emit(i.FRAME_SYNC,{data:n,type:i.FRAME_SYNC})}),e.on("pkStatusSync",function(e){var n=t.jsonData(e);t.context.node.emit(i.PK_STATUS_SYNC,{data:n,type:i.PK_STATUS_SYNC})}),e.on("switchShadow",function(e){var n=t.jsonData(e);t.context.node.emit(i.SWITCH_SHADOW,{data:n,type:i.SWITCH_SHADOW})}),e.on("switchDefense",function(e){var n=t.jsonData(e);t.context.node.emit(i.SWITCH_DEFENSE,{data:n,type:i.SWITCH_DEFENSE})}),e.on("damage",function(e){var n=t.jsonData(e);t.context.node.emit(i.CALCULA_DAMAGE,{data:n,type:i.CALCULA_DAMAGE})}),e.on("upgrade",function(e){var n=t.jsonData(e);t.context.node.emit(i.ROLE_UPGRADE,{data:n,type:i.ROLE_UPGRADE})}),e.on("revive",function(e){var n=t.jsonData(e);t.context.node.emit(i.USER_REVIVE,{data:n,type:i.USER_REVIVE})})},a.prototype.jsonData=function(e){return JSON.parse(e).data},t.exports=a,cc._RF.pop()},{Engine:"Engine",Glb:"Glb",Manage:"Manage",Message:"Message"}],Res:[function(e,t,n){"use strict";cc._RF.push(t,"177fa5xBNpP2JiChkDFNUjN","Res");t.exports={prefab:{other:"prefabs/other",role:"prefabs/role",shadow:"prefabs/shadow",defense:"prefabs/defense",skill:"prefabs/skill",map:"prefabs/map",ui:"prefabs/ui",battle:"prefabs/battle"},assets:{}},cc._RF.pop()},{}],SkillAnim:[function(e,t,n){"use strict";cc._RF.push(t,"1a7b1jDaGFDKbH4WEu5pEl8","SkillAnim"),cc.Class({extends:cc.Component,editor:{requireComponent:dragonBones.ArmatureDisplay},properties:{_armature:null,_armatureDisplay:null,_parentFunc:null},onLoad:function(){var e=this;this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.COMPLETE,function(t){e._parentFunc&&e._parentFunc()},this)},playAnim:function(e,t){this._parentFunc=t,this._armatureDisplay.armatureName=e.armature,this._armatureDisplay.playAnimation(e.anim,1)}}),cc._RF.pop()},{}],SkillItem:[function(e,t,n){"use strict";cc._RF.push(t,"29895p9YB5Bn4HhSTvQd33Z","SkillItem"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},itemID:0},updateItem:function(e,t){this.itemID=t}}),cc._RF.pop()},{}],SkillUI:[function(e,t,n){"use strict";cc._RF.push(t,"bee78qJZWtELY1oPkmy+3mT","SkillUI"),cc.Class({extends:cc.Component,properties:{itemTemplate:{default:null,type:cc.Node},scrollView:{default:null,type:cc.ScrollView},spawnCount:0,totalCount:0},onLoad:function(){this.content=this.scrollView.content,this.items=[],this.initialize(),this.scheduleOnce(function(){this.scrollView.scrollToTop(.1)},0)},initialize:function(){for(var e=0;e<this.spawnCount;++e){var t=cc.instantiate(this.itemTemplate);this.content.addChild(t),t.getComponent("SkillItem").updateItem(e,e),this.items.push(t)}}}),cc._RF.pop()},{}],Skill:[function(e,t,n){"use strict";cc._RF.push(t,"75e9amAzzhAcZ6APMugAw7O","Skill");var o=e("SkillAnim"),i=e("NodePool");e("GameData");cc.Class({extends:cc.Component,properties:{_node:cc.node,_anim:o},onLoad:function(){this._node=this.node.getChildByName("node"),this._anim=this._node.addComponent(o)},releaseSkill:function(e,t,n){switch(n.re){case 1:this._anim.playAnim(n,function(){delete t.sk,delete t.conid,i.prototype.destroySkill(n.pk,t)}),t.x=e.x+200*e.scaleX,t.y=e.y;break;case 2:this._anim.playAnim(n,function(){delete t.sk,delete t.conid,i.prototype.destroySkill(n.pk,t)}),t.scaleX=1,t.x=e.x,t.y=e.y+600;var o=cc.moveTo(1,cc.v2(e.x+500*e.scaleX,e.y+100));t.runAction(o)}}}),cc._RF.pop()},{GameData:"GameData",NodePool:"NodePool",SkillAnim:"SkillAnim"}],SocketHandle:[function(e,t,n){"use strict";cc._RF.push(t,"9ca87xwGihLFrX0iafrTOmd","SocketHandle"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],UI:[function(e,t,n){"use strict";cc._RF.push(t,"6230blvF99F8pOI3sCZSewO","UI");var o=e("Res"),i=e("LoadRes"),s=e("roleAttrUI"),a=e("toolsbarUI"),c=e("roleBarUI"),r=e("processBgUI"),d=e("skillManageUI");t.exports={init:function(e){var t=this;t.Canvas=cc.find("Canvas"),t.uinode=t.Canvas.getChildByName("UI"),t.uinode&&t.loadUI(function(){r.init(t),c.init(t),s.init(t),d.init(t),a.init(t),e()})},loadUI:function(e){i.prototype.loadPrefab(o.prefab.ui,function(){e()})}},cc._RF.pop()},{LoadRes:"LoadRes",Res:"Res",processBgUI:"processBgUI",roleAttrUI:"roleAttrUI",roleBarUI:"roleBarUI",skillManageUI:"skillManageUI",toolsbarUI:"toolsbarUI"}],gsui:[function(e,t,n){"use strict";cc._RF.push(t,"e7504JLviNALqaaIYwDiqoi","gsui"),window.gsui={},function(e){var t=function(){function t(){}return t.create=function(n,o,i,s){return e.isNull(i)||(e.TOUCH_END(i,function(e){n.active=!n.active}),e.MOUSE_ENTER_LEAVE(i)),e.isNull(s)||(e.TOUCH_END(s,function(e){n.active=!1}),e.MOUSE_ENTER_LEAVE(s)),e.TOUCH_MOVE(o,function(e){var t=e.touch.getDelta();n.x+=t.x,n.y+=t.y}),t.node=n,t},t}();e.window=t;var n=function(){function t(){}return t.create=function(n,o,i,s){if(i){var a=n.getComponent(cc.Layout),c=i.line,r=i.row,d=e.getNum(i.paddingLine),l=e.getNum(i.paddingRow),h=e.getNum(i.spacingX),u=e.getNum(i.spacingY);a.paddingTop=l,a.paddingBottom=l,a.paddingLeft=d,a.paddingRight=d,a.spacingX=h,a.spacingY=u;for(var p=function(t){var i=cc.instantiate(s);i.active=!0,i.parent=n,e.TOUCH_END(i,function(e){if(i.childrenCount>0){var t=i.children[0];o.show(i,t.btns)}})},_=0;_<c*r;_++)p();return t.node=n,t}},t.setItems=function(n,o,i,s){e.isNull(o)||(e.page.setNum(s,i/30,function(e){t.setPages(n,o,e)}),t.setPages(n,o,1))},t.setPages=function(n,o,i){var s=30*(i-1),a=s+30,c=n.children,r=0;t.resetPage(c);for(var d=s;d<a&&!e.isNull(o[d]);d++)e.item.create(c[r],o[d]),r++},t.resetPage=function(e){for(var t in e)e[t].childrenCount>0&&e[t].children[0].destroy()},t}();e.backpack=n;var o=function(){function e(){}return e.create=function(e,t){var n=new cc.Node("node");return n.addComponent(cc.Sprite).spriteFrame=t.spriteFrame,n.btns=t.btns,n.properties=t.properties,n.parent=e,n},e}();e.item=o;var i=function(){function t(){}return t.create=function(e,t){var n={};return n.group=e,n.pageStyle=t,n},t.setNum=function(t,n,o){for(var i=function(n){var i=cc.instantiate(t.pageStyle),s=i.children[0];s.label=s.getComponent(cc.Label),s.label.string=n+1,i.parent=t.group,e.TOUCH_END(i,function(e){o(n+1)}),i.active=!0},s=0;s<n;s++)i(s)},t}();e.page=i;var s=function(){function t(){}return t.getBtns=function(){return{use:"\u02b9\ufffd\ufffd",drop:"\ufffd\ufffd\ufffd\ufffd",sendChat:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"}},t.create=function(n,o,i,s){var a=t.getBtns();if(!e.isNull(a)){for(var c in n.active=!1,o.active=!1,t.btns={},t.callback=s,a)t.createBtn(n,c,a[c],o);return e.TOUCH_END(n,function(){n.active=!1,o.active=!1}),e.TOUCH_START(i,function(){n.active=!1}),t.node=n,t}},t.createBtn=function(n,o,i,s){var a=e.NEW_LABEL(i);t.btns[o]=a,a.parent=n;var c=e.NEW_LABEL(i);e.TOUCH_END(a,function(e){n.active=!1,s.active=!1,t.gridStyle.childrenCount>0&&t.callback(o,t.gridStyle.children[0])}),a.on(cc.Node.EventType.MOUSE_ENTER,function(e){s.parent=a,s.active=!0,c.label.string=i,c.parent=s},a),a.on(cc.Node.EventType.MOUSE_LEAVE,function(e){s.parent=n,s.active=!1,c.label.string=""},a)},t.show=function(n,o){if(t.reset(),!e.isNull(o)){var i=0;for(var s in o)t.btns[o[s]].active=!0,i++;t.node.height=20*i+2}t.node.x=n.x+t.node.width/2,t.node.y=n.y-5,t.node.active=!0,t.gridStyle=n},t.reset=function(){var n=t.node.children;if(!e.isNull(n))for(var o in n)n[o].active=!1},t}();e.submenu=s;var a=function(){function e(){}return e.click=function(e,t){},e}();e.btn=a}(gsui||(gsui={})),function(e){var t=function(){function e(){}return e.get=function(t){if(void 0!=t){var n={};return e.setNodeList(t,n),n}},e.setNodeList=function(t,n){n[t.name]=t;var o=t.children;for(var i in o){var s=o[i];n[s.name]=s,s.children.length>0&&e.setNodeList(s,n)}},e}();e.nodes=t}(gsui||(gsui={})),function(e){e.getNum=function(t){return e.isNull(t)?0:t},e.isNull=function(e){return void 0==e},e.NEW_SPRITE=function(e){var t=new cc.Node(e);return t.sp=t.addComponent(cc.Sprite),t.sp.width=80,t.sp.height=18,t},e.NEW_LABEL=function(e){var t=new cc.Node(e);return t.label=t.addComponent(cc.Label),t.label.string=e,t.label.fontSize=14,t.label.lineHeight=18,t},e.NEW_SELECTBTN=function(t){var n=e.NEW_LABEL(t),o=e.NEW_SPRITE(t);return o.parent=n,n.sp=o,n},e.TOUCH_MOVE=function(e,t){e.on(cc.Node.EventType.TOUCH_MOVE,function(n){if(t)t(n);else{var o=n.touch.getDelta();e.x+=o.x,e.y+=o.y}},e)},e.MOUSE_ENTER_LEAVE=function(t){e.MOUSE_ENTER(t,function(e){t.scaleX=1.1,t.scaleY=1.1}),e.MOUSE_LEAVE(t,function(e){t.scaleX=1,t.scaleY=1})},e.MOUSE_ENTER=function(e,t){e.on(cc.Node.EventType.MOUSE_ENTER,function(e){t(e)})},e.MOUSE_LEAVE=function(e,t){e.on(cc.Node.EventType.MOUSE_LEAVE,function(e){t(e)})},e.TOUCH_START=function(e,t){e.on(cc.Node.EventType.TOUCH_START,function(e){t(e)})},e.TOUCH_END=function(e,t){e.on(cc.Node.EventType.TOUCH_END,function(e){t(e)})},e.ENABLE_BTN=function(e){var t=e.getComponent(cc.Sprite),n=e.getComponent(cc.Button);t.spriteFrame=n.normalSprite,n.interactable=!0},e.DISABLE_BTN=function(e){var t=e.getComponent(cc.Sprite),n=e.getComponent(cc.Button);t.spriteFrame=n.disabledSprite,n.interactable=!1},e.TAB_BTNS=function(t,n){if(t){var o=function(n){for(var o in t)t[o].name==n?e.DISABLE_BTN(t[o]):e.ENABLE_BTN(t[o])},i=function(i){0==i?e.DISABLE_BTN(t[i]):e.ENABLE_BTN(t[i]),e.TOUCH_END(t[i],function(e){o(t[i].name),n(t[i].name)})};for(var s in t)i(s)}}}(gsui||(gsui={})),cc._RF.pop()},{}],processBgUI:[function(e,t,n){"use strict";cc._RF.push(t,"42e64Z644NPUbO+XqJduiNa","processBgUI");var o=e("NodePool");t.exports={init:function(e){var t="processBg",n=e.uinode,i=cc.find("Canvas/processBg");i||(o.prototype.instanceUI(t),i=o.prototype.getUI(t)),i&&(i.parent=n,this.initContent(e,i))},initContent:function(e,t){this._root=t,this._root.active=!0,e.processBg=this},hideBg:function(){this._root.active=!1},child:function(e,t){return e?-1==t.indexOf("/")?e.getChildByName(t):cc.find("Canvas/UI/"+e.name+"/"+t):null}},cc._RF.pop()},{NodePool:"NodePool"}],roleAttrUI:[function(e,t,n){"use strict";cc._RF.push(t,"c4b210745xAeYvh/F0d9oN8","roleAttrUI");var o=e("NodePool"),i=e("GameData"),s=e("selectEye");t.exports={init:function(e){var t="RoleAttribute";this.eyeList={e1:"\u5355\u52fe\u7389\u5199\u8f6e\u773c",e2:"\u53cc\u52fe\u7389\u5199\u8f6e\u773c",e3:"\u4e09\u52fe\u7389\u5199\u8f6e\u773c",e4:"\u6708\u8bfb",e5:"\u5929\u7167",e6:"\u987b\u4f50\u4e4b\u7537",e7:"\u4f0a\u90aa\u90a3\u5c90",e8:"\u6c38\u6052\u4e07\u82b1\u7b52\u5199\u8f6e\u773c",e9:"\u76f4\u52fe\u7389\u8f6e\u56de\u773c",e10:"\u8f6e\u56de\u773c",e11:"\u4e5d\u52fe\u7389\u8f6e\u56de\u773c",e12:"\u8f6e\u56de\u5199\u8f6e\u773c"};var n=e.uinode;o.prototype.instanceUI(t);var i=o.prototype.getUI(t);i&&(i.parent=n,i.x=0,i.y=0,this.initContent(e,i))},initContent:function(e,t){var n=this,o=n.child(t,"style/head");gsui.TOUCH_MOVE(o,function(e){var n=e.touch.getDelta();t.x+=n.x,t.y+=n.y});var s=n.child(t,"style/close");t.active=!1,gsui.isNull(s)||(gsui.TOUCH_END(s,function(e){t.active=!1}),gsui.MOUSE_ENTER_LEAVE(s));var a=n.child(t,"value/content/role");n.initRoleContent(t);var c=n.child(t,"value/content/state");n.initStateContent(t);var r=n.child(t,"value/colbtn/btn_role"),d=n.child(t,"value/colbtn/btn_eye");gsui.isNull(r)||gsui.isNull(d)||gsui.TAB_BTNS([r,d],function(e){switch(e){case"btn_role":n.showRolePage(i.curUser),a.active=!0,c.active=!1;break;case"btn_eye":n.showStatePage(i.curUser),a.active=!1,c.active=!0}}),this.v={root:t,view:function(){gsui.DISABLE_BTN(r),gsui.ENABLE_BTN(d),n.showRolePage(i.curUser),a.active=!0,c.active=!1}},e.roleAttr=this},initRoleContent:function(e){var t="value/content/role/values/",n=this.child(e,t+"rowbtn/btn_role"),o=this.child(e,t+"base/row1/nm"),i=this.child(e,t+"base/row1/camp"),s=this.child(e,t+"base/row1/empvalue"),a=this.child(e,t+"base/row2/state"),c=this.child(e,t+"base/row2/lv"),r=this.child(e,t+"base/row2/evilvalue"),d=this.child(e,t+"attr/attack"),l=this.child(e,t+"attr/defense"),h=this.child(e,t+"attr/crit"),u=this.child(e,t+"attr/dodge"),p=this.child(e,t+"attr/attackspeed"),_=this.child(e,t+"attr/movespeed"),f=this.child(e,t+"attr/hurtrebound"),E=this.child(e,t+"attr/hurtreduction"),m=this.child(e,t+"body");gsui.TAB_BTNS([n],function(e){}),this.roleContent={nm:o,camp:i,empvalue:s,state:a,lv:c,evilvalue:r,attack:d,defense:l,crit:h,dodge:u,attackspeed:p,movespeed:_,hurtrebound:f,hurtreduction:E,body:m}},initStateContent:function(e){var t=this,n="value/content/state/values/",o=t.child(e,n+"attr/layout/curstate"),i=t.child(e,n+"attr/layout/curlv"),a=t.child(e,n+"attr/eyestates"),c=t.child(e,n+"attr/selectstate"),r=c.getComponent(s),d=c.getComponent(cc.Sprite);this._spriteFrames=r.spriteFrames();t.child(e,n+"attr/attrlayout/movespeed"),t.child(e,n+"attr/attrlayout/hurtrebound"),t.child(e,n+"attr/attrlayout/hurtreduction");var l=t.child(e,n+"rowbtn/btn_state"),h=t.child(e,n+"statebtn/btn_re1"),u=t.child(e,n+"statebtn/btn_re2"),p=t.child(e,n+"statebtn/btn_re3"),_=t.child(e,n+"statebtn/btn_re4"),f=t.child(e,n+"statebtn/btn_re5"),E=t.child(e,n+"statebtn/btn_re6"),m=t.child(e,n+"statebtn/btn_re7"),y=t.child(e,n+"statebtn/btn_re8"),g=t.child(e,n+"statebtn/btn_re9"),v=t.child(e,n+"statebtn/btn_re10"),N=t.child(e,n+"statebtn/btn_re11"),S=t.child(e,n+"statebtn/btn_re12"),C=t.child(e,n+"upgradebtn/btn_lv"),R=t.child(e,n+"upgradebtn/btn_state");gsui.TAB_BTNS([l],function(e){}),gsui.TOUCH_START(C,function(e){}),gsui.TOUCH_END(C,function(e){}),gsui.TAB_BTNS([h,u,p,_,f,E,m,y,g,v,N,S],function(e){var n=e.replace("btn_r","");t.setDisplayEye(n)}),this.stateContent={curstate:o,curlv:i,selectstateSp:d,eyestates:a,btn_lv:C,btn_state:R}},loadRoleAttr:function(e){var t=this.roleContent,n=t.body,o=n.children;for(var i in o)o[i].active=!1;n.getChildByName(e.base.role).active=!0,this.setLabel(t.nm,e.nm),this.setLabel(t.empvalue,e.base.exp+"/"+e.base.expMax),this.setLabel(t.lv,e.base.lv),this.setLabel(t.evilvalue,e.base.evil),this.setLabel(t.attack,e.ability.attack),this.setLabel(t.defense,e.ability.defense),this.setLabel(t.crit,e.ability.crit),this.setLabel(t.dodge,e.ability.dodge),this.setLabel(t.attackspeed,e.ability.atkSpeed),this.setLabel(t.movespeed,e.base.speed),this.setLabel(t.hurtrebound,e.ability.drebound),this.setLabel(t.hurtreduction,e.ability.dreduction)},loadStateAttr:function(e){this.stateContent;this.curUser=e,this.isLoad||(this.isLoad=!0,this.setDisplayEye("e1"))},setDisplayEye:function(e){var t=this.stateContent;if(t.selectstateSp.spriteFrame=this._spriteFrames[e],this.setLabel(t.curstate,this.eyeList[e]),this.curUser){var n=this.curUser.extraAttr.pupilForce,o=Number(e.replace("e","")),i=Number(n.nm.replace("e",""));o>i?(this.setLabel(t.curlv,0),this.setLabel(t.eyestates,"\u672a\u638c\u63e1"),gsui.DISABLE_BTN(t.btn_lv)):o<i?(this.setLabel(t.curlv,10),this.setLabel(t.eyestates,"\u5df2\u638c\u63e1"),gsui.DISABLE_BTN(t.btn_lv)):o==i&&(this.setLabel(t.curlv,n.lv),this.setLabel(t.eyestates,"\u719f\u7ec3\u4e2d"),gsui.ENABLE_BTN(t.btn_lv))}},showRolePage:function(e){this.loadRoleAttr(e)},showStatePage:function(e){this.loadStateAttr(e)},child:function(e,t){return e?-1==t.indexOf("/")?e.getChildByName(t):cc.find("Canvas/UI/"+e.name+"/"+t):null},setLabel:function(e,t){e.getComponent(cc.Label).string=t}},cc._RF.pop()},{GameData:"GameData",NodePool:"NodePool",selectEye:"selectEye"}],roleBarUI:[function(e,t,n){"use strict";cc._RF.push(t,"d2715it1JxEDoFtC8iVemq4","roleBarUI");var o=e("NodePool");t.exports={init:function(e){var t="roleBar",n=e.uinode,i=this.child(n,t);i||(o.prototype.instanceUI(t),i=o.prototype.getUI(t)),i&&(i.parent=n,this.initContent(e,i))},initContent:function(e,t){var n=this.child(t,"headFrame"),o=this.child(t,"hp/bar"),i=this.child(t,"hp/num"),s=this.child(t,"mana/bar"),a=this.child(t,"mana/num");this.v={root:t,headFrame:n,hpbar:o,hpnum:i,manabar:s,mananum:a},e.roleBar=this},updateRoleBody:function(e){var t=this.v,n=t.headFrame.children;for(var o in n)n[o].active=!1;t.headFrame.getChildByName(e.role).active=!0,this.updateHpAndMana(e)},updateHpAndMana:function(e){var t=this.v;t.hpbar.width=e.hp/e.hpMax*200,t.hpnum.getComponent(cc.Label).string=e.hp+"/"+e.hpMax,t.manabar.width=e.mc/e.mcMax*200,t.mananum.getComponent(cc.Label).string=e.mc+"/"+e.mcMax},child:function(e,t){return e?-1==t.indexOf("/")?e.getChildByName(t):cc.find("Canvas/UI/"+e.name+"/"+t):null}},cc._RF.pop()},{NodePool:"NodePool"}],selectEye:[function(e,t,n){"use strict";cc._RF.push(t,"e648fDmVYxIdqPlWzKBqO7J","selectEye"),cc.Class({extends:cc.Component,properties:{ui_roleAttr:{default:null,type:cc.SpriteAtlas}},onLoad:function(){},spriteFrames:function(){return this.ui_roleAttr._spriteFrames}}),cc._RF.pop()},{}],skillManageUI:[function(e,t,n){"use strict";cc._RF.push(t,"e8f5ehZHlBMarQz9BjuiZ9S","skillManageUI");var o=e("NodePool");t.exports={init:function(e){var t="skillManage",n=e.uinode;o.prototype.instanceUI(t);var i=o.prototype.getUI(t);i&&(i.parent=n,i.x=0,i.y=0,this.initContent(e,i))},initContent:function(e,t){var n=this.child(t,"style/head");gsui.TOUCH_MOVE(n,function(e){var n=e.touch.getDelta();t.x+=n.x,t.y+=n.y});var o=this.child(t,"style/close");t.active=!1,gsui.isNull(o)||(gsui.TOUCH_END(o,function(e){t.active=!1}),gsui.MOUSE_ENTER_LEAVE(o)),this.initProhibitionContent(t);var i=this.child(t,"value/colbtn/btn_prohibition");gsui.isNull(i)||gsui.TAB_BTNS([i],function(e){}),this.v={root:t,view:function(){}},e.skillManage=this},initProhibitionContent:function(e){var t=this,n="value/content/prohibition/values/";t.skillList={chaokongque:"\u671d\u5b54\u96c0",suitu:"\u7a0e\u571f\u8f6c\u751f",fengjin:"\u5c38\u9b3c\u5c01\u5c3d",tongling:"\u5916\u9053\u9b54\u50cf",yuedu:"\u6708\u8bfb",tianzhao:"\u5929\u7167",xuzuo:"\u987b\u4f50\u80fd\u4e4e",wanxiang:"\u4e07\u8c61\u5929\u5f15",dibaotianxing:"\u5730\u7206\u5929\u661f",lunhui:"\u8f6e\u56de"};var o=[t.child(e,n+"skillgroup/row1/item1"),t.child(e,n+"skillgroup/row1/item2"),t.child(e,n+"skillgroup/row1/item3"),t.child(e,n+"skillgroup/row1/item4"),t.child(e,n+"skillgroup/row2/item1"),t.child(e,n+"skillgroup/row2/item2"),t.child(e,n+"skillgroup/row2/item3"),t.child(e,n+"skillgroup/row2/item4"),t.child(e,n+"skillgroup/row2/item5"),t.child(e,n+"skillgroup/row2/item6"),t.child(e,n+"skillgroup/row3/item1"),t.child(e,n+"skillgroup/row3/item2")],i={iconNode:t.child(e,n+"skillinfo/icon"),nameNode:t.child(e,n+"skillinfo/name")},s=function(e){var n=o[e];gsui.isNull(n)||(gsui.TOUCH_END(n,function(e){t.setDisplaySkill(i,n)}),gsui.MOUSE_ENTER_LEAVE(n))};for(var a in o)s(a)},setDisplaySkill:function(e,t){var n=t.children[0];this.getSprite(e.iconNode).spriteFrame=this.getSprite(t,!0).spriteFrame,this.setLabel(e.nameNode,this.skillList[n.name])},getSprite:function(e,t){var n=e.getComponent(cc.Sprite);return t&&(n=e.children[0].getComponent(cc.Sprite)),n},setLabel:function(e,t){e.getComponent(cc.Label).string=t},child:function(e,t){return e?-1==t.indexOf("/")?e.getChildByName(t):cc.find("Canvas/UI/"+e.name+"/"+t):null}},cc._RF.pop()},{NodePool:"NodePool"}],socketTest:[function(e,t,n){"use strict";cc._RF.push(t,"f26c4GOQJdI1IipdXxNG8QS","socketTest");var o=e("Glb"),i=e("Engine");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=i.prototype.init(o.login);e.emit("client","client send!"),e.on("server",function(e){console.log(e)})}}),cc._RF.pop()},{Engine:"Engine",Glb:"Glb"}],toolsbarUI:[function(e,t,n){"use strict";cc._RF.push(t,"72661EOqa9Nu5QkI2rfiUxu","toolsbarUI");var o=e("NodePool");e("GameData");t.exports={init:function(e){var t="toolsbar",n=e.uinode;this.skillList={yuedu:"yuedu",tianzhao:"tianzhao",xuzuo:"xuzuo",wanxiang:"wanxiang",dibaotianxing:"dibaotianxing",chaokongque:"chaokongque",suitu:"suitu",fengjin:"fengjin",tongling:"tongling",lunhui:"lunhui"},o.prototype.instanceUI(t);var i=o.prototype.getUI(t);i&&(i.parent=n,i.x=0,i.y=0,this.initContent(e,i))},initContent:function(e,t){e.toolsbar=this;var n=this.child(t,"menu/rolebtn"),o=e.roleAttr;gsui.isNull(n)||(gsui.TOUCH_END(n,function(t){o||(o=e.roleAttr),o.v&&(o.v.view(),o.v.root.active=!o.v.root.active)}),gsui.MOUSE_ENTER_LEAVE(n));var i=this.child(t,"menu/backpackbtn");gsui.isNull(i)||(gsui.TOUCH_END(i,function(e){}),gsui.MOUSE_ENTER_LEAVE(i));var s=this.child(t,"menu/skillbtn"),a=e.skillManage;gsui.isNull(s)||(gsui.TOUCH_END(s,function(t){a||(a=e.skillManage),a.v&&(a.v.root.active=!a.v.root.active)}),gsui.MOUSE_ENTER_LEAVE(s));var c=this.child(t,"menu/petbtn");gsui.isNull(c)||(gsui.TOUCH_END(c,function(e){}),gsui.MOUSE_ENTER_LEAVE(c)),this.initSkillContent(e,t)},initSkillContent:function(e,t){var n=this,o=n.child(t,"skills/row1").children,i=n.child(t,"skills/row2").children,s=function(e){var t=o[e];gsui.isNull(t)||(gsui.TOUCH_END(t,function(e){n.onSkill1BtnClick(t)}),gsui.MOUSE_ENTER_LEAVE(t))};for(var a in o)s(a);var c=function(e){var t=i[e];gsui.isNull(t)||(gsui.TOUCH_END(t,function(e){n.onSkill1BtnClick(t)}),gsui.MOUSE_ENTER_LEAVE(t))};for(var a in i)c(a)},onSkill1BtnClick:function(e){switch(e.name){case this.skillList.xuzuo:}},child:function(e,t){return e?-1==t.indexOf("/")?e.getChildByName(t):cc.find("Canvas/UI/"+e.name+"/"+t):null}},cc._RF.pop()},{GameData:"GameData",NodePool:"NodePool"}],use_reversed_rotateBy:[function(e,t,n){"use strict";cc._RF.push(t,"7405bhbfHdI+Il4MoRZdDOm","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],use_reversed_rotateTo:[function(e,t,n){"use strict";cc._RF.push(t,"d932eO4rPlEvJQmzLnUWD6a","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["gsui","use_reversed_rotateBy","use_reversed_rotateTo","Game","Collision","AnimCtrl","Damage","Joystick","KeyBoardCtrl","KeyCodeCtrl","KeyHandler","Other","Player","MapManager","Portal","Skill","SkillAnim","UI","processBgUI","roleAttrUI","roleBarUI","selectEye","skillManageUI","toolsbarUI","DragonBonesAnim","Home","LoadRes","Res","Login","NodePool","Engine","Message","Response","SocketHandle","socketTest","Menu","SkillItem","SkillUI","Func","GameData","Glb","Manage"]);